<h1>
  前端地址：
          https://github.com/Yuyaoqaq/Share.git
</h1>

# 短图文社交平台技术文档
## 一、文档概述
本文档针对短图文社交平台已实现的核心功能模块（登录注册、短图文发布、内容详情页、Feed 流、个人中心）进行技术实现说明，基于 Vue + Spring Boot 技术栈，结合 Vant UI、Axios、JWT、Vuex 等工具完成开发，部署于阿里云 OSS 服务器并通过 Nginx 反向代理，明确各模块实现逻辑、技术细节及验收标准。

## 二、技术栈说明
### 2.1 前端技术栈

#### 前端环境要求
- Node.js v14.x/v16.x
- npm 6.x+
- jdk 1.8
- maven 3.6.1
#### 本地运行
npm run serve

- 框架：Vue ^2.6.14
- 状态管理：Vuex ^3.6.2
- UI 组件库：Vant UI ^2.13.9
- 网络请求：Axios ^0.18.0
- 图标资源：阿里巴巴矢量库
- 其他：Vue Router（路由管理） ^3.5.1、localStorage（本地存储）

### 2.2 后端技术栈
- 框架：Spring Boot 2.6.13
- 认证授权：JWT  
- 数据库：MySQL（数据存储）8.0.31    MP 3.4.2
- 图片存储：阿里云 OSS
- 部署环境：阿里云 OSS 服务器、Nginx（反向代理）

## 三、登录注册模块
### 3.1 功能实现
#### 3.1.1 登录功能
1. 前端实现：
   - 基于 Vant UI 的表单组件封装登录页面，包含账号（手机号 / 用户名）、密码输入框及验证码模块，通过表单校验规则（非空、手机号格式）确保输入合法性；
   - 登录请求通过 Axios 发送 POST 请求至后端接口，请求头携带表单数据，Vuex 维护全局登录状态；
   - 登录成功后，后端返回 JWT 令牌，前端将令牌存储于 localStorage，Vue Router 路由守卫校验令牌有效性，未登录状态拦截跳转至登录页。
2. 后端实现：
   - Spring Boot 编写登录接口，接收前端参数后校验账号密码（密码采用加密存储），校验通过生成 JWT 令牌并返回；
   - 基于 JWT 实现无状态认证，令牌包含用户 ID、过期时间等信息，后端通过拦截器校验请求头中的令牌。

#### 3.1.2 注册功能
1. 前端实现：
   - 注册页面包含账号、密码、确认密码、验证码输入项，自定义校验规则（密码强度、两次密码一致性）；
   - 注册请求发送后，后端返回注册结果，成功则自动触发登录流程，失败提示错误信息。
2. 后端实现：
   - 注册接口接收参数后，校验账号唯一性（数据库查询），密码加密后存入用户表，完成用户信息初始化。

#### 3.1.3 退出登录
- 前端清除 localStorage 中的 JWT 令牌，Vuex 重置登录状态，跳转至登录页；
- 后端无需额外处理，令牌过期后自动失效。

### 3.2 核心代码位置
- 前端登录页面：`src/views/Login/index.vue`
- 前端注册页面：`src/views/Register/index.vue`
- 后端登录接口：`com.cy.share.controller.UserController.login()`
- 后端注册接口：`com.cy.share.controller.UserController.register()`
- JWT 工具类：`com.cy.share.utils.JwtUtil.java`

## 四、短图文发布模块
### 4.1 基础功能实现
#### 4.1.1 短图文编辑器
- 基于 Vant UI 组件实现编辑器布局，分为文字输入区域（标题、正文）和图片上传区域；
- 图片上传通过 Axios 调用后端接口，后端对接阿里云 OSS 完成图片存储，返回图片 URL 至前端，前端将 URL 存入编辑状态；
- 编辑器支持内容暂存（前端 localStorage），避免页面刷新丢失内容。

#### 4.1.2 内容发布
- 前端收集编辑器中的标题、正文、图片 URL 等数据，携带 JWT 令牌发送 POST 请求至发布接口；
- 后端校验用户登录态，将内容存入短图文数据表（包含 `create_time` 发布时间、`update_time` 更新时间字段，首次发布时两者值一致），返回发布成功结果。

#### 4.1.3 二次编辑功能
1. 触发逻辑：
   - 内容详情页中，长按图片弹出操作弹窗，若当前登录用户为内容作者，弹窗显示「编辑」按钮；非作者则显示「保存图片」「不喜欢」「举报」选项；
   - 点击「编辑」按钮，跳转至发布页面，前端携带内容 ID 调用详情接口，拉取历史内容数据并回显至编辑器。
2. 编辑发布：
   - 编辑完成后发送更新请求至后端，后端更新短图文数据表内容，同时修改 `update_time` 为当前时间，`create_time` 保持不变；
   - 二次发布后，Feed 流排序仍基于 `create_time` 字段，详情页展示更新后的内容及 `update_time`（标注为「更新时间」）。

### 4.2 核心代码位置
- 前端发布页面：`src/views/release/index.vue`
- 后端发布接口：`com.cy.share.controller.LogController.release()`
- 后端更新接口：`com.cy.share.controller.LogController.update()`
- 前端详情页操作弹窗：`src/views/detail/components/....vue`

## 五、内容详情页模块
### 5.1 功能实现
1. 内容展示：
   - 前端接收路由参数中的内容 ID，调用详情接口拉取数据，展示标题、正文、图片列表、作者头像 / 昵称、点赞数、发布 / 更新时间；
   - 发布时间展示逻辑：若 `update_time` 与 `create_time` 一致，显示「发布时间：xxx」；若不一致，显示「更新时间：xxx」。
2. 权限控制：
   - 基于当前登录用户 ID 与内容作者 ID 的比对结果，控制长按图片弹出弹窗的按钮选项，实现编辑权限的差异化展示。

### 5.2 核心代码位置
- 前端详情页面：`src/views/detail/index.vue`
- 后端详情接口：`com.cy.share.controller.LogController.detail()`

## 六、Feed 流模块
### 6.1 功能实现
#### 6.1.1 信息流展示
- 基于 Vant UI 的 List 组件实现瀑布流布局，使用骨架屏，前端调用 Feed 流接口获取短图文列表数据，循环渲染内容卡片；
- 后端接口从短图文数据表中查询数据，按 `create_time` 倒序排序，返回分页结果（`pageNum`、`pageSize`）。

#### 6.1.2 下拉刷新
- 集成 Vant UI 的 PullRefresh 组件，下拉触发刷新逻辑，前端重置分页为第一页，重新调用 Feed 流接口获取最新数据，替换原有列表并显示刷新状态提示；
- 刷新完成后，瀑布流组件重新渲染，展示最新发布的内容。

#### 6.1.3 滚动加载更多
- 基于 Vant UI List 组件的触底加载功能，触底时前端请求下一页数据，拼接至现有列表；
- 后端判断是否有更多数据，若无则返回标识，前端显示「没有更多了」提示文案。

### 6.2 性能优化
- 首屏加载优化：图片懒加载（Vant UI Lazyload 组件）、接口数据缓存（Vuex 暂存），确保首屏 LCP 控制在 2.5s 内；
- 滚动性能优化：减少滚动过程中的 DOM 操作，采用虚拟列表思想优化长列表渲染，确保滚动帧率稳定在 55fps 以上。

## 七、个人中心模块
部署版本已修复并改变了路由访问为history模式。
